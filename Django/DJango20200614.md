# TIL 2020-06-14

## 오늘 배운 내용

---

- Caching

- Throttling

### Caching 

캐시는 데이터를 저장하고 기억하는데 이 기억하는 데이터가 변경 되었을때 기존의 데이터값만을 기억하고 있어

최신 값과 매치가 되지 않는다. 이걸 변경해주려면 db를 조회해서 새로운값을 가져오고 기존 캐시를 삭제한다.

여기에 적합한 프로그램이 [redis](https://engkimbs.tistory.com/869) 이다.



### Throttling

Throttling은 request에 limit 를 주는건데 로그인 , 비로그인 별마다  제한을 둘수도 있고 몇회의 연속적인 request에 따라 제한을 걸어 줄 수 있다.



```python

    'DEFAULT_THROTTLE_CLASSES': [
        'rest_framework.throttling.AnonRateThrottle',
        'rest_framework.throttling.UserRateThrottle'
    ],
    'DEFAULT_THROTTLE_RATES': {
        'anon': '10/min',
        'user': '1000/day'
    }

```

위 setting 처럼  
`anon` or `user` 에 리미트를 걸어줄 수 있다.  
이렇게 throttle 사용시 장점은 지속적인 접근을 차단해 서버의 과부하를 막을 수 있다고 생각한다.

아래의 `rates` 에서는 day,min 만 세팅했지만 더 많은 옵션이 존재하므로 상황에 맞게 부여하면 될것 같다.

[공식문서 참조](https://www.django-rest-framework.org/api-guide/throttling/)
